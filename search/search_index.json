{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"About","text":"<p>NuWro is a Monte Carlo neutrino event generator. It has been developed since 2006 at the University of Wroclaw. It includes all basic dynamics for neutrino scattering processes (for both neutral and charged currents):</p> <ul> <li>(quasi-) elastic scattering</li> <li>single pion production through Delta(1232) resonance (including non-resonant background)</li> <li>deep inelastic scattering (or in other words - more inelastic than Delta resonance)</li> <li>two-body current contribution to (quasi-) elastic scattering</li> <li>coherent pion production</li> </ul> <p>In the first three cases interactions occur on a single nucleon from a nucleus in the Impulse Approximation regime. Two-body current scattering goes beyond Impulse Approximation and neutrino interacts with at least two nucleons. Coherent pion production occurs on a whole nucleus. For all dynamics, but the coherent, the primary vertex is followed by final state interactions based on the intra-nuclear cascade model.</p> <p>NuWro provides a multiplicity of choices for a description of a target nucleus, including Fermi gas and spectral function. It also contains various parameterizations of nuclear form factors. Many quantum effects, like Pauli blocking or formation zone, are included.</p> <p>The generator has a detector geometry module and can handle realistic neutrino beams. All together makes NuWro a complete tool to use in neutrino experiments.</p> <p>This wiki describes technical aspect of using NuWro rather than physics implemented in the generator. For the latter please see the publication list.</p> <p>Credits</p>   Currently involved in the project:  <ul> <li>Jan Sobczyk</li> <li>Artur Ankowski</li> <li>Krzysztof Graczyk</li> <li>Cezary Juszczak</li> <li>Kajetan Niewczas</li> <li>Rwik Banerjee</li> <li>Hemant Prasad</li> </ul>  Former members:  <ul> <li>Tomasz Golan</li> <li>Jaros\u0142aw Nowak</li> <li>Jakub \u017bmuda</li> </ul>   Significant contribution:  <ul> <li>Artur Kobyli\u0144ski</li> <li>Alexis Nikolakopoulos</li> <li>Pawe\u0142 Przew\u0142ocki</li> <li>Luke Pickering</li> <li>Patrick Stowell</li> <li>Maciej Tabiszewski</li> <li>Christopher Thorpe</li> <li>Qiyu Yan</li> <li>Dmitry Zhuridov</li> </ul>"},{"location":"references/","title":"References","text":""},{"location":"references/#general","title":"General","text":"<p>Final State Interactions Effects in Neutrino-Nucleus Interactions</p> <p>T. Golan, C. Juszczak, J.T. Sobczyk, Phys.Rev. C86 (2012) 015505</p> <p>Modeling nuclear effects in NuWro Monte Carlo neutrino event generator</p> <p>T. Golan, PhD theis</p> <p>Simulations from a new neutrino event generator</p> <p>C. Juszczak, J.A. Nowak, J.T. Sobczyk, Nucl.Phys.Proc.Suppl. 159 (2006) 211-216</p> <p>NuWro: the Wroclaw Monte Carlo Generator of Neutrino Interactions</p> <p>T. Golan, J.T. Sobczyk, J. Zmuda, Nucl.Phys.Proc.Suppl. 229-232 (2012) 499</p>"},{"location":"references/#models","title":"Models","text":""},{"location":"references/#spectral-function","title":"Spectral function","text":"<p>On extraction of value of axial mass from MiniBooNE neutrino quasi-elastic double differential cross section data</p> <p>C. Juszczak, J.T. Sobczyk, J. Zmuda, Phys.Rev. C82 (2010) 045502</p> <p>Construction of spectral functions for medium-mass nuclei</p> <p>A.M. Ankowski, J.T. Sobczyk, Phys.Rev. C77 (2008) 044311</p>"},{"location":"references/#random-phase-approximation","title":"Random phase approximation","text":"<p>The Algebraic solution of RPA equations for the charged current quasielastic neutrino nucleus scattering</p> <p>K.M. Graczyk, J.T. Sobczyk, Eur.Phys.J. C31 (2003) 177-185</p>"},{"location":"references/#effective-potential","title":"Effective potential","text":"<p>Spectrum of recoil nucleons in quasi-elastic neutrino nucleus interactions</p> <p>C. Juszczak, J.A. Nowak, J.T. Sobczyk, Eur.Phys.J. C39 (2005) 195-200</p>"},{"location":"references/#final-state-interactions","title":"Final state interactions","text":"<p>Final State Interactions Effects in Neutrino-Nucleus Interactions</p> <p>T. Golan, C. Juszczak, J.T. Sobczyk, Phys.Rev. C86 (2012) 015505</p>"},{"location":"references/#resonance-pion-production","title":"Resonance pion production","text":"<p>Simulations from a new neutrino event generator</p> <p>C. Juszczak, J.A. Nowak, J.T. Sobczyk, Nucl.Phys.Proc.Suppl. 159 (2006) 211-216</p> <p>WroNG - Wroclaw Neutrino Generator of events for single pion production</p> <p>J.T. Sobczyk, J.A. Nowak, K.M. Graczyk, Nucl.Phys.Proc.Suppl. 139 (2005) 266-271</p> <p>C(5)A axial form factor from bubble chamber experiments</p> <p>K.M. Graczyk, D. Kielczewska, P. Przewlocki, J.T. Sobczyk, Phys.Rev. D80 (2009) 093001</p> <p>Investigation of recent weak single-pion production data</p> <p>J.T. Sobczyk, J. \u017bmuda, Phys.Rev. C91 (2015) no.4, 045501</p>"},{"location":"references/#deep-inelastic-scattering","title":"Deep inelastic scattering","text":"<p>Hadron production in Wroclaw neutrino event generator</p> <p>J.A. Nowak, J.T. Sobczyk, Acta Phys.Polon. B37 (2006) 2371-2378</p> <p>NuWro: Monte Carlo generator of neutrino interactions</p> <p>J. Sobczyk, PoS NUFACT08 (2008) 141</p>"},{"location":"references/#meson-exchange-current","title":"Meson exchange current","text":"<p>Multinucleon ejection model for Meson Exchange Current neutrino interactions</p> <p>J.T. Sobczyk, Phys.Rev. C86 (2012) 015504</p> <p>Extraction of Axial Mass and Strangeness Values from the MiniBooNE Neutral Current Elastic Cross Section Measurement</p> <p>T. Golan, K.M. Graczyk, C. Juszczak, J.T. Sobczyk, Phys.Rev. C88 (2013) 024612</p>"},{"location":"references/#ewro","title":"eWro","text":"<p>NuWro Monte Carlo generator of neutrino interactions - first electron scattering results</p> <p>J. \u017bmuda, K.M. Graczyk, C. Juszczak, J.T. Sobczyk, Acta Phys.Polon. B46 (2015) no.11, 2329</p>"},{"location":"singularity/","title":"Singularity","text":"<p>Singularity containers are provided for all NuWro releases (starting from 17.09).</p> <p>The builds can be found in Singularity Hub.</p> <p>Each container includes base OS, ROOT with PYTHIA6 and NuWro (in <code>/opt/</code> folder).</p> <p>For more information about Singularity please visit Singularity Used Guide.</p>"},{"location":"singularity/#getting-a-container","title":"Getting a container","text":"<p>One can easily get a Singularity container using <code>singularity pull</code>:</p> <pre><code>$ singularity pull shub://NuWro/builds:[release tag]\n</code></pre> <p>where <code>tag = YY.MM</code> (please make sure capitalization is correct - it is case sensitive), e.g. </p> <pre><code>$ singularity pull shub://NuWro/builds:17.09\n</code></pre> <p>Downloaded image (by default) has the following name:</p> <pre><code>[user]-[repo]-[branch]-[tag].simg\n</code></pre> <p>e.g.</p> <pre><code>NuWro-builds-master-17.09.simg\n</code></pre> <p>Information about software versions installed in a container is stored in its metadata. To check it use <code>inspect</code>, e.g.</p> <pre><code>$ singularity inspect NuWro-builds-master-17.09.simg \n{\n    \"MAINTAINER\": \"tomasz.golan@gmail.com\",\n    \"NUWRO\": \"17.09\",\n    \"ROOT\": \"5.34/36\",\n    \"OS\": \"Ubuntu14.04\",\n    ...\n}\n</code></pre>"},{"location":"singularity/#using-a-container","title":"Using a container","text":"<p>Any application can be executed from a container using <code>exec</code>, e.g. to run NuWro with default parameters</p> <pre><code>$ singularity exec NuWro-builds-master-17.09.simg nuwro\n</code></pre> <p>Arguments can be passed as usual, e.g.</p> <pre><code>$ singularity exec NuWro-builds-master-17.09.simg nuwro -i my_params.txt -o my_output.root\n</code></pre> <p>In the same way one can run <code>myroot</code> to analyse the output, e.g.</p> <pre><code>$ singularity exec NuWro-builds-master-17.09.simg myroot \n</code></pre> <p>Also, NuWro containers are set up to run NuWro, by default:</p> <pre><code>singularity run [img file]\n</code></pre> <p>or </p> <pre><code>./[img file]\n</code></pre> <p>are equivalent to <code>singularity exec [img file] nuwro</code>, e.g.</p> <pre><code>./NuWro-builds-master-17.09.simg -p \"beam_energy = 1234\"\n</code></pre> <p>would run NuWro with all deafult parameters but neutrino energy (equal 1234 MeV).</p>"},{"location":"singularity/#using-root5-container","title":"Using ROOT5 container","text":"<p>One can also use the container with preinstalled ROOT 5 and PYTHIA6 to compile and use NuWro from local drive. To get the container:</p> <pre><code>$ singularity pull shub://NuWro/builds:root5\n</code></pre> <p>Start interactive shell:</p> <pre><code>$ singularity shell NuWro-builds-master-root5.simg\n</code></pre> <p>Go into NuWro folder (must be located somewhere in $HOME)</p> <pre><code>cd /home/user/my/path/to/nuwro\nmake\n./bin/nuwro\n</code></pre>"},{"location":"analyze-output/basics/","title":"Basics","text":"<p>Work in progress. Meanwhile, you can find more information in the tutorial.</p>"},{"location":"analyze-output/basics/#event","title":"Event","text":"<p>Generated events are represented by objects of <code>class event : public TObject</code>. They are saved in an output ROOT file under a TTree named \"treeout\". Each <code>event</code> object stores all information about a single neutrino scattering process.</p> <p>This section describes informations you can extract from an <code>event</code> object.</p> <p>Note</p> <p><code>class event : public TObject</code> provides many useful public variables and methods to use when analyze a ROOT output file. This section describes some of them. For the full list please refer to <code>nuwro/src/event1.h</code>.</p>"},{"location":"analyze-output/basics/#flags","title":"Flags","text":"<p><code>event.flag</code> stores the structure of the following flags:</p> Flag True for <code>qel</code> (quasi-)elastic event <code>res</code> pion production event through resonance excitation <code>dis</code> deep inelastic scattering event <code>mec</code> two-body current event <code>nc</code> neutral current event <code>cc</code> charged current event <p>Please note that RES channel is mainly pion production through Delta resonance, however, in general it is defined as inelastic events with invariant mass below 1.6 GeV. Everything above that value is marked as DIS channel.</p>"},{"location":"analyze-output/basics/#vectors-of-particles","title":"Vectors of particles","text":"<p>There are three main <code>std::vectors</code> of particles:</p> Vector Stores <code>in</code> initial state particles in primary vertex <code>out</code> final state particles in primary vertex <code>post</code> final state particles after final state interactions <p>Note</p> <p>The convention is that a lepton is always first particle in a vector, so:</p> <ul> <li><code>in[0]</code> - incoming neutrino</li> <li><code>out[0]</code> - outgoing neutrino / charged lepton</li> </ul> <p>More information about <code>particle</code> class can be found in particle section.</p>"},{"location":"analyze-output/basics/#particles-multiplicities","title":"Particles multiplicities","text":"<p>Although one can grab particles multiplicities directly from vectors, there are several methods to make it easier:</p> Method Returns the number of final state particles <code>int n();</code> after primary vertex <code>int f();</code> after final state interactions <code>int nof(int pdg);</code> after primary vertex given by the PDG code <code>int fof(int pdg);</code> after final state interactions given by the PDG code"},{"location":"analyze-output/basics/#kinematics","title":"Kinematics","text":"<p>There are only few kinematics methods for an event (see particle section for more):</p> Method Returns <code>vect q();</code> four-momentum transfer (more on vect class) <code>double q2();</code> four-momentum transfer squared <code>double W</code>();` invariant mass <p>Please note default NuWro units is MeV.</p>"},{"location":"analyze-output/basics/#final-state-interactions","title":"Final state interactions","text":"<p>The following methods return the number of specific interaction type, happened during final state interactions:</p> Method Returns the number of <code>int number_of_nucleon_elastic();</code> nucleon elastic <code>int number_of_nucleon_spp();</code> nucleon single pion production <code>int number_of_nucleon_dpp();</code> nucleon double pion production <code>int number_of_pion_elastic();</code> pion elastic <code>int number_of_pion_ce();</code> pion charge exchange <code>int number_of_pion_spp();</code> pion single pion production <code>int number_of_pion_dpp();</code> pion double pion production <code>int number_of_pion_tpp();</code> pion triple pion production <code>int number_of_pion_abs();</code> pion absorption <code>int number_of_interactions();</code> the sum of above"},{"location":"analyze-output/basics/#simulation-settings","title":"Simulation settings","text":"<p><code>event.par</code> stores the copy of parameters used for a simulation. Please note, that some values may be different from event to event (e.g. target nucleus for detector simulations).</p>"},{"location":"analyze-output/basics/#particle","title":"Particle","text":"<p>Events keep information about initial and final states particles in <code>std::vector &lt;particle&gt;</code> (as described here). Usually, one has to loop over these vectors to extract information about final state particles.</p> <p>This section describes informations you can find in a <code>particle</code> class object.</p> <p>Note</p> <p><code>class particle : public vect</code> provides many useful public variables and methods to use when analyze a ROOT output file. This section describes some of them. For the full list please refer to <code>nuwro/src/particle.h</code>.</p>"},{"location":"analyze-output/basics/#selected-methods","title":"Selected methods","text":"Method Returns <code>double E();</code> total energy <code>double energy();</code> total energy <code>double Ek();</code> kinetic energy <code>double m();</code> mass <code>double mass();</code> mass <code>double mass2();</code> mass squared <code>double momentum();</code> value of the momentum <code>double momentum2();</code> momentum squared <code>vec p();</code> momentum as a 3-vector <code>vect&amp; p4();</code> four-momentum <code>bool lepton();</code> true if lepton <code>bool pion();</code> true if pion <code>bool nucleon();</code> true if nucleon <p>Please note default NuWro units is MeV.</p>"},{"location":"analyze-output/basics/#selected-variables","title":"Selected variables","text":"Method Description <code>int pdg;</code> PDG code"},{"location":"analyze-output/basics/#vectors","title":"Vectors","text":"<p>There are two classes for handling vectors:</p> <ul> <li><code>class vec</code>: 3-vectors (x, y, z)</li> <li><code>class vect</code>: 4-vectors (t, x, y, z)</li> </ul> <p>They both overload all reasonable operators, so vectors algebra is straightforward.</p> <p>Not much to say about it - they are vectors. If you feel like reading more on that please see <code>nuwro/src/vec.h</code> and <code>nuwro/src/vect.h</code>.</p>"},{"location":"analyze-output/interactive/","title":"Interactive mode","text":"<p>You can analyze NuWro output in the ROOT interactive mode. To use variables and methods described in basics section you need to load a proper dictionary. It is as simple as running ROOT through <code>myroot</code> located in <code>nuwro/bin</code>.</p> <p>Just type <code>myroot</code> if you have <code>nuwro/bin</code> added to your <code>$PATH</code></p> <p>First you need to load a ROOT file and point to the right TTree:</p> <pre><code>root [0] TFile* file = new TFile (\"/path/to/output.root\")\nroot [1] TTree* tree = (TTree*)file-&gt;Get(\"treeout\")\n</code></pre> <p>You can easily draw any distribution for variables described in basics section using Draw function.</p> <p>Example</p> <p>To draw Q2 distribution simply type:</p> <pre><code>root [2] tree-&gt;Draw(\"-q2()\")\n</code></pre> <p>which access <code>event-&gt;q2()</code>.</p> <p></p> <p>Example</p> <p>To draw target nucleon (<code>in[1]</code>) momentum distribution:</p> <pre><code>root [3] tree-&gt;Draw(\"in[1].momentum()\")\n</code></pre> <p>which access <code>event-&gt;particle-&gt;momentum()</code>.</p> <p></p> <p>Example</p> <p>To draw outgoing lepton momentum z component:</p> <pre><code>root [4] tree-&gt;Draw(\"out[0].p().z\")\n</code></pre> <p>which access <code>event-&gt;particle-&gt;vec-&gt;z</code>.</p> <p></p> <p>Example</p> <p>You can add cuts by providing boolean expression as a second argument of Draw function:</p> <pre><code>root [5] tree-&gt;Draw(\"-q2()\", \"out[0].Ek() &gt; 500\")\n</code></pre> <p>which draws Q2 distribution for events with outgoing lepton kinetic energy above 500 MeV.</p> <p></p>"},{"location":"analyze-output/macros/","title":"ROOT macros","text":"<p>There are some basic examples of using the interactive ROOT mode to extract informations from a NuWro output file in the previous section. Usually, what you really want is to have a ROOT macro to do that. This section contains some examples of how to prepare them to work with events generated by NuWro.</p> <p>You can find ROOT documentation here</p>"},{"location":"analyze-output/macros/#preparing-a-sample","title":"Preparing a sample","text":"<p>For the examples in this section the following sample was generated:</p> <ul> <li>beam: muon neutrino with energy = 1 GeV</li> <li>target: Carbon</li> <li>channels: all CC</li> <li>no. of events: 1 000 000</li> </ul> <p>using the following command:</p> <pre><code>nuwro -i numu_1gev_carbon_cc.txt -o numu_1gev_carbon_cc.root\n</code></pre> <p>with the following <code>numu_1gev_carbon_cc.txt</code> settings file:</p> <pre><code>####################\n# General settings #\n####################\n\nnumber_of_events = 1000000  // the number of events to generate\n\n#################\n# Beam settings #\n#################\n\nbeam_type = 0       // single-flavor beam\nbeam_particle = 14  // muon neutrino\nbeam_energy = 1000  // mono-energetic beam (1000 MeV)\n\n###################\n# Target settings #\n###################\n\n@target/C.txt  // Carbon\n\n#########################\n# Interactions settings #\n#########################\n\ndyn_qel_cc = 1  // charged current quasi-elastic\ndyn_qel_nc = 0  // neutral current elastic\ndyn_res_cc = 1  // charged current resonant pion production\ndyn_res_nc = 0  // neutral current resonant pion production\ndyn_dis_cc = 1  // charged current deep inelastic scattering\ndyn_dis_nc = 0  // neutral current deep inelastic scattering\ndyn_coh_cc = 1  // charged current coherent pion production\ndyn_coh_nc = 0  // neutral current coherent pion production\ndyn_mec_cc = 1  // charged current 2p2\ndyn_mec_nc = 0  // neutral current 2p2h\n\n##########################################\n# Interactions settings: (quasi-)elastic #\n##########################################\n\nqel_cc_axial_mass = 1030  // axial mass [MeV]\n\n###########################################\n# Interactions settings: two-body current #\n###########################################\n\nmec_kind = 3  // Nieves et al. model\n</code></pre> <p>Note</p> <p>You can see that <code>numu_1gev_carbon_cc.txt</code> does not include all parameters (like e.g. <code>nuwro/data/params.txt</code> settings file example).</p> <p>For all parameters which were not provided in a settings file NuWro will use default values as described here.</p>"},{"location":"analyze-output/macros/#basic-plots","title":"Basic plots","text":""},{"location":"analyze-output/macros/#histograms-created-by-draw","title":"Histograms created by Draw","text":"<p>In the previous section you can find some basic examples for using the Draw function to make plots, e.g.</p> <pre><code>tree-&gt;Draw(\"-q2()\")\n</code></pre> <p>The Draw function can be also used to create ROOT histograms, e.g.</p> <pre><code>tree-&gt;Draw(\"-q2() &gt;&gt; my_histogram\")\n</code></pre> <p>will draw the histogram but also save it in <code>TH1F *my_histogram</code>. Pretty handy.</p> <p>You may want to use Draw to create <code>TH1</code> objects w/o actually drawing them. Well, just turn graphics off:</p> <pre><code>tree-&gt;Draw(\"-q2() &gt;&gt; my_histogram\", \"\", \"goff\");\n</code></pre> <p>Having said that, take a look at the following macro (<code>basic_plots.c</code>):</p> <pre><code>void basic_plots(char *filename)\n{\n    ///// LOAD FILE AND TTREE /////\n\n    TFile *file = new TFile(filename);\n    TTree *tree = (TTree*)file-&gt;Get(\"treeout\");\n\n    ///// CREATE HISTOGRAMS /////\n\n    // Q2 distribution\n    tree-&gt;Draw(\"-q2() &gt;&gt; q2\", \"\", \"goff\");\n    // Q2 distribution only for QEL events\n    tree-&gt;Draw(\"-q2() &gt;&gt; q2_qel_true\", \"flag.qel\", \"goff\");\n    // Q2 distribution for events w/o any pion in the final state\n    tree-&gt;Draw(\"-q2() &gt;&gt; q2_qel_like\", \n               \"fof(211) + fof(111) + fof(-211) == 0\",\n               \"goff\");\n    // Q2 distribution for non-QEL events w/o any pion in the final state\n    tree-&gt;Draw(\"-q2() &gt;&gt; q2_bkg\",\n               \"!flag-&gt;qel &amp;&amp; fof(211) + fof(111) + fof(-211) == 0\",\n               \"goff\");\n\n\n    ///// HISTOGRAM SETTINGS /////\n\n    q2-&gt;SetLineColor(kBlack);\n    q2-&gt;SetTitle(\"#nu_{#mu} on Carbon, E_{#nu} = 1 GeV\");\n    q2-&gt;SetXTitle(\"Q^{2} [MeV^{2}]\");\n\n    q2_qel_true-&gt;SetLineColor(kBlue);\n    q2_qel_like-&gt;SetLineColor(kGreen);\n    q2_bkg-&gt;SetLineColor(kRed);\n\n    ///// SAVE HISTOGRAMS /////\n\n    // first you need a canvas\n    TCanvas *c = new TCanvas;\n\n    q2-&gt;Draw();\n    q2_qel_true-&gt;Draw(\"same\"); // \"same\" -&gt; on the same plot\n    q2_qel_like-&gt;Draw(\"same\");\n    q2_bkg-&gt;Draw(\"same\");\n\n    c-&gt;Print(\"numu_1gev_carbon_cc.q2.svg\");\n}\n</code></pre> <p>At the beginning a file is loaded and a right tree is pointed. Get used to it as every of your scripts is going to start like this. Histograms are created using Draw function (as explained above):</p> <pre><code>Draw(\"what &gt;&gt; histogram\", \"[conditions]\", \"[graphics off]\")\n</code></pre> <p>Setting up labels, colors etc. are not worth to discuss here - it is not ROOT tutorial after all. Please see ROOT documentation for more informations.</p> <p>Instead of using default <code>c1</code> canvas we create our own. Now, every <code>histogram-&gt;Draw()</code> call will be put on the canvas. Please note, that if <code>\"same\"</code> option is not used, current content of the canvas will be overwritten.</p> <p>Finally, <code>Print</code> function is used to save the plot to SVG file.</p> <p>Please note, that the main function in the macro has the same name as the macro file. It makes it easy to run the macro directly from the command line:</p> <pre><code>myroot -b -q 'basic_plots.c(\"numu_1gev_carbon_cc.root\")'\n</code></pre> <p><code>-b</code> stands for batch mode (w/o graphics) and <code>-q</code> is to exit ROOT after job is done.</p> <p>This call is equivalent to:</p> <pre><code>$ myroot -b\nroot [0] .L basic_plots.c \nroot [1] basic_plots(\"numu_1gev_carbon_cc.root\")\nroot [2] .q\n</code></pre> <p>The final plot (\"numu_1gev_carbon_cc.q2.svg\"):</p> <p></p>"},{"location":"analyze-output/macros/#histograms-created-by-hand","title":"Histograms created by hand","text":""},{"location":"getting-started/installation/","title":"Installation","text":""},{"location":"getting-started/installation/#getting-nuwro","title":"Getting NuWro","text":"<p>To get the most up to date version of NuWro use:</p> <pre><code>git clone https://github.com/NuWro/nuwro.git\n</code></pre> <p>To get one of the stable releases use:</p> <pre><code>git clone -b [release tag] https://github.com/NuWro/nuwro.git\n</code></pre> <p>e.g.</p> <pre><code>git clone -b nuwro_17.01 https://github.com/NuWro/nuwro.git\n</code></pre> <p>git version older than 1.7.10</p> <p><code>git clone -b [release tag]</code> will not work for git older than 1.7.10 (but it is from May 2012 so you may consider updating your system).</p> <p>To get specific release you can use <code>git checkout tags/[release tag]</code>, e.g.</p> <pre><code>git clone https://github.com/NuWro/nuwro.git\ngit checkout tags/nuwro_17.01\n</code></pre>"},{"location":"getting-started/installation/#dependencies","title":"Dependencies","text":"<ul> <li>ROOT</li> <li>PYTHIA6</li> </ul>"},{"location":"getting-started/installation/#building-root-with-pythia6-support","title":"Building ROOT with PYTHIA6 support","text":"<ul> <li>download ROOT source code</li> <li>make sure you have all ROOT dependencies installed</li> <li>download PYTHIA6 source code</li> <li>build PYTHIA6 shared object (<code>libPythia6.so</code>):</li> </ul> <pre><code>tar -xzvf pythia6.tar.gz\ncd pythia6 &amp;&amp; ./makePythia6.linux\n</code></pre> <p>It requires <code>gfortran</code> Fortran compiler.</p> <ul> <li>copy <code>libPythia6.so</code> to <code>root/lib</code> folder:</li> </ul> <pre><code>tar -zxvf root_v*.source.tar.gz\nmkdir root/lib\ncp pythia6/libPythia6.so root/lib\n</code></pre> <ul> <li>configure ROOT:</li> </ul> <pre><code>cd root &amp;&amp; ./configure --with-pythia6-libdir=lib\n</code></pre> <ul> <li>and make it:</li> </ul> <pre><code>make\n</code></pre> <p>For ROOT version 6.16.00 you can try out the following script :</p> <pre><code>#make temporary directory for downloading sources\nmkdir ~/install\ncd ~/install\n#dowload pythia6 sources \nwget https://root.cern.ch/download/pythia6.tar.gz\ntar xzf pythia6.tar.gz\ncd pythia6\n#modify ./makePythia6.linux to use gfortran in place of g77\nsed -i 's/g77/gfortran/g' ./makePythia6.linux\n#make libPythia6.so\nbash ./makePythia6.linux\n#download ROOT sources\ncd ~/install\nwget https://root.cern/download/root_v6.16.00.source.tar.gz\ntar zxf root_v6.16.00.source.tar.gz\n#create build directory\nmkdir ~/root\ncd ~/root\nmkdir ~/root/lib\n#copy pythia6 library to build directory\ncp ~/install/pythia6/libPythia6.so  ~/root/lib\n#cmake ROOT with PYTHIA6 enabled\ncmake -DPYTHIA6_LIBRARY=~/root/lib/libPythia6.so -Dpyhia6=ON ~/install/root-6.16.00\n#make it\nmake -j4\n</code></pre> <ul> <li>set environmental variables:</li> </ul> <pre><code>export ROOTSYS=(path to root directory)\nexport PATH=$PATH:$ROOTSYS/bin\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$ROOTSYS/lib\n</code></pre> <p>you can use the script provided by ROOT (<code>bin/this_root.sh</code>) that includes the commands and run <code>source bin/this_root.sh</code> every time you start a terminal or add the above lines to either <code>~/.bashrc</code> or <code>~/.bash_profile</code>.</p> <p>macOS support</p> <p>NuWro has been tested to work properly on the following configurations</p> <pre><code>x86_64-apple-darwin15.6.0\nclang-800.0.42.1\nroot-5.34.36\n\narm64-apple-darwin23.2.0\nclang-1500.1.0.2.5\nroot-6.30.04\n</code></pre> <p>While installing on macOS one should remember about the following differences:</p> <ul> <li>PYTHIA6 should be compiled using the <code>./makePythia6.macosx64</code> command,</li> <li>the shared object of PYTHIA6 is called <code>libPythia6.dylib</code>,</li> <li>the bash profile file is called <code>~/.profile</code> or <code>~/.zshrc</code>.</li> </ul> <p>Note that the following problems are known to emerge:</p> <ul> <li> <p>while installing <code>gfortran</code> via Homebrew the <code>libgfortran.dylib</code> file is not properly linked for the C compiler, one should export the variable <code>LIBRARY_PATH</code> with the path to the lib file. e.g. put into <code>~/.profile</code> or <code>~/.zshrc</code> the following line (it will depend on the <code>gfortran</code> installation)</p> <p><code>export LIBRARY_PATH=/usr/local/lib/gcc/6</code></p> </li> </ul>"},{"location":"getting-started/installation/#building-nuwro","title":"Building NuWro","text":"<p>Once you have ROOT installed with PYTHIA6 support just make NuWro:</p> <pre><code>tar -zxvf nuwro-*.tar.gz\ncd nuwro &amp;&amp; make\n</code></pre>"},{"location":"getting-started/installation/#troubleshooting","title":"Troubleshooting","text":"<ul> <li>If you have troubles to compile ROOT with gcc5 compiler and getting errors about undefined references to std::__cxx11 (described here), you can add the following flag:</li> </ul> <pre><code>-D_GLIBCXX_USE_CXX11_ABI=0\n</code></pre> <p>to CFLAGS in proper [root]/config/Makefile.[system] file.</p>"},{"location":"getting-started/parameters/","title":"Parameters list","text":"<p>NuWro uses by default settings from the <code>params.txt</code> file located in <code>$PWD</code> directory. If the file does not exist, the one from <code>nuwro/data</code> folder is loaded. If both files are missing or some of the parameters are not set in the file, default values are used. </p>"},{"location":"getting-started/parameters/#general-settings","title":"General settings","text":"Parameter name Possible arguments Default value Description number_of_events positive integer 1e5 The number of equally weighted events to be saved in the output ROOT file number_of_test_events positive integer 1e6 The number of events used to calculate cross sections (not saved by default) user_events 0, 1 0 Used to turn on the fitting procedure:0 - Run NuWro1 - Fit axial mass to MiniBooNE data for CCQE user_params  (for user_events 1) x y z - Parameters for the axial mass extraction procedure:x - the minimum axial mass valuey - the maximum axial mass valuez - the axial mass step random_seed positive integer 0 Controls the random seed persistence:0 - use time(NULL) as a seed for the random number generator1 - read state from \u201crandom seed\u201d file or use seed=time(NULL), if the file was not foundn - use n as the seed for the random number generator mixed_order 0, 1 0 If 1, events are saved to the output file in random order save_test_events 0-2 0 Turn on to use test events in the analysis:0 - test events are not saved1 - test events are finalized and stored in weight.eventsout.root file, the average weight is equal to the total cross section2 - test events of nonzero weights are finalized and stored in weight.eventsout.root file, the weights are respectively scaled, so the average weight is equal to the total cross section"},{"location":"getting-started/parameters/#beam-settings","title":"Beam settings","text":"Parameter name Possible arguments Default value Description beam_direction x y z 0 0 1 The direction of the neutrino momentum in xyz coordinates beam_type 0-4 0 Types of beams: 0 - a single neutrino flavor beam1 - a mixed flavor beam2 - a beam loaded from a ROOT file3 - a beam loaded from the histogram (histout.txt)4 - create histout.txt file based on a ROOT file (than use beam type 3 to run NuWro) beam_particle(for beam_type 0) +/- 12, 14, 16 14 PDG number of the incident neutrino beam_energy(for beam_type 0) explained below 1000 The energy profile beam_content(for beam_type 1) explained below - The mixed beam definition beam_folder(for beam_type 2, 4) path ../flux The path to the directory with ROOT files beam_file_first(for beam_type 2, 4) positive integer 1 The number of the first file in the folder to be read beam_file_limit(for beam_type 2, 4) positive integer 0 The number of files to be loaded (0 - read files to the last one in the directory) beam_offset x y z 0 0 0 The offset of the position of the interaction in xyz coordinates beam_placement(in cascade mode only) 0-2 0 The starting position of the particle:0 - the propagation starts at the center of the nucleus1 - the propagation starts at a random place inside the nucleus2 - the propagation starts just under the surface of the nucleus"},{"location":"getting-started/parameters/#defining-energy-profile-for-a-single-flavor-beam","title":"Defining energy profile for a single flavor beam","text":"<p>For a single flavor neutrino beam you need to set up <code>beam_type = 0</code> and specify neutrino PDG using <code>beam_particle = [PDG code]</code>.</p> <p>The energy profile is set using <code>beam_energy</code>:</p> <ul> <li> <p>for a mono-energetic beam use:</p> <pre><code>beam_energy = E\n</code></pre> <p>where <code>E</code> is neutrino energy in MeV</p> </li> <li> <p>for a uniform beam with energy range from <code>E0</code> to <code>E1</code> use:</p> <pre><code>beam_energy = E0 E1\n</code></pre> </li> <li> <p>for a non-uniform beam with energy range from <code>E0</code> to <code>E1</code> given by histogram <code>a1, a2, ..., an</code> use:</p> <pre><code>beam_energy = E0 E1 a0 a1 ... an\n</code></pre> </li> </ul> <p>Hint</p> <p>The histogram does not have to be normalized. The probability of finding neutrino energy in i-th bin is defined as follows:</p> P_i = \\frac{a_i}{\\sum\\limits_{i=0}^n a_j} <p>Example</p> <p>The following code:</p> <pre><code>beam_energy = 1000 2000 1 2 3 4\n</code></pre> <p>defines the following beam:</p> <pre><code>^\n|\n|                       |-----|\n|                       |     |\n|                 |-----|     |\n|                 |     |     |\n|           |-----|     | 40% |\n|           |     | 30% |     |\n|     |-----| 20% |     |     |\n|     | 10% |     |     |     |   \n|-----|-----|-----|-----|-----|-----&gt; E [MeV]   \n    1000  1250  1500  1750  2000\n</code></pre>"},{"location":"getting-started/parameters/#defining-energy-profile-for-a-mixed-flavor-beam","title":"Defining energy profile for a mixed flavor beam","text":"<p>For a mixed flavor neutrino beam you need to set up <code>beam_type = 1</code>.</p> <p>Instead of using <code>beam_particle</code> and <code>beam_energy</code> you should define a beam with:</p> <pre><code>beam_content = [PDG code] [fraction]% [beam energy]\n</code></pre> <p>where <code>[beam energy]</code> is defined as for a single flavor beam.</p> <p>Example</p> <p>The following code:</p> <pre><code>beam_content = 14 80% 1000\n</code></pre> <p>defines mono-energetic muon neutrino beam, which constitutes 80% of the whole flux.</p> <p>You may add as many beam contents as you want in the following way:</p> <pre><code>beam_content += [PDG code] [fraction]% [beam energy]\n</code></pre> <p>Please note <code>+=</code>. Using <code>=</code> would clear the previous content.</p> <p>In general, a mixed flavor beam definition would look like this:</p> <pre><code>beam_content = [PDG code 1] [fraction 1]% [beam energy 1]\nbeam_content += [PDG code 2] [fraction 2]% [beam energy 2]\nbeam_content += [PDG code 3] [fraction 3]% [beam energy 3]\n...\n</code></pre> <p>Example</p> <p>The following code:</p> <pre><code>beam content = 12 75% 1000\nbeam content += -12 20% 1000 2000\nbeam content += 14 5% 1000 1500 1 5 10 15 5 1\n</code></pre> <p>defines the following beam:</p> <ul> <li>75% of mono-energetic electron neutrinos</li> <li>20% of electron anti-neutrinos with uniformly distributed energy</li> <li>5% of muon neutrinos with some energy distribution in range 1-1.5 GeV</li> </ul>"},{"location":"getting-started/parameters/#predefined-beams","title":"Predefined beams","text":"<p>One can also use predefined beam specifications instead of the above parameters. The list of beams can be found in <code>nuwro/data/beam</code> directory. To use one of those beams, one must use the following line:</p> <pre><code>@beam/beamfile.txt\n</code></pre> <p>where <code>beamfile.txt</code> is the name of the file from <code>nuwro/data/beam</code> directory.</p>"},{"location":"getting-started/parameters/#target-settings","title":"Target settings","text":"Parameter name Possible arguments Default value Description target_type 0-2 0 Types of targets:0 - a single nucleus1 - a target composed from some nuclei2 - a detector geometry loaded from a ROOT file nucleus_p(for target_type 0) positive integer 6 The number of protons in a target nucleus nucleus_n(for target_type 0) positive integer 6 The number of neutrons in a target nucleus nucleus_E_b(for target_type 0) positive integer 34 The binding potential (sum of binding and Fermi energies) nucleus_kf(for target_type 0) positive integer 220 The Fermi momentum nucleus_target 0-5 2 Nucleus models used in a primary interaction:0 - free nucleon1 - Fermi gas2 - local Fermi gas 3 - Bodek-Ritchie model4 - spectral function5 - deuterium nucleus_model 0, 1 1 Nucleus density profiles for FSI:0 - constant density1 - realistic density profile target_content(for target_type 1) explained below - The composed target definition geo_file(for target_type 2) filename target/ND280v9r7p5.root The path to the file with the detector geometry geo_name(for target_type 2) geometry name ND280Geometry v9r7p5 The name of the geometry in the file geo_o(for target_type 2) x y z 0 0 0 The coordinates of the center of the box geo_d(for target_type 2) x y z 2000 5000 2000 The half dimension of the box geo_volumne(for target_type 2) master volume name - The name of the master volume in the detector file"},{"location":"getting-started/parameters/#defining-a-single-nucleus-target","title":"Defining a single nucleus target","text":"<p>In order to define a single nucleus target you need to set up <code>target_type = 0</code>. Then, define the number of nucleons using:</p> <pre><code>nucleus_p = [#protons]\nnucleus_n = [#neutrons]\n</code></pre> <p>You may set up other nucleus properties using parameters listed in the table above.</p> <p>Example</p> <p>To define Carbon target use:</p> <pre><code>target_type = 0\nnucleus_p = 6\nnucleus_n = 6\n</code></pre>"},{"location":"getting-started/parameters/#defining-a-composed-target","title":"Defining a composed target","text":"<p>In order to define a multi-nuclei target you need to set up <code>target_type = 1</code>.</p> <p>Instead of using <code>nucleus_p</code>, <code>nucleus_n</code> and other nucleus related parameters you should define your target with:</p> <pre><code>target_content = [#protons] [#neutrons] [#nuclei] x [binding energy] [Fermi momentum] [nucleus target]\n</code></pre> <p>where only first three arguments are required.</p> <p>When using local Fermi gas model binding energy and Fermi momentum are taken from tables anyway.</p> <p>You may add as many nuclei as you want in the following way:</p> <pre><code>target_content += [#protons] [#neutrons] [#nuclei] x [binding energy] [Fermi momentum] [nucleus target]\n</code></pre> <p>Please note <code>+=</code>. Using <code>=</code> would clear the previous content.</p> <p>In general, a multi-nuclei target definition would look like this:</p> <pre><code>target_content = [#protons 1] [#neutrons 1] [#nuclei 1] x\ntarget_content += [#protons 2] [#neutrons 2] [#nuclei 2] x\ntarget_content += [#protons 3] [#neutrons 3] [#nuclei 3] x\n</code></pre> <p>Example</p> <p>To define C_2H_6O use the following code:</p> <pre><code>target_type = 1\ntarget content = 6 6 2 x\ntarget content += 1 0 6 x\ntarget content += 8 8 1 x\n</code></pre>"},{"location":"getting-started/parameters/#predefined-targets","title":"Predefined targets","text":"<p>One can also use predefined target specifications instead of the above parameters. The list of targets can be found in <code>nuwro/data/target</code> directory. To use one of those beams, one must use the following line:</p> <pre><code>@target/targetfile.txt\n</code></pre> <p>where <code>targetfile.txt</code> is the name of the file from <code>nuwro/data/target</code> directory.</p> <p>Please note that many predefined targets use slightly different syntax for composed targets. The syntax without space after <code>[#nuclei]</code> will not work on MacOS.</p>"},{"location":"getting-started/parameters/#interactions-settings","title":"Interactions settings","text":"Parameter name Possible arguments Default value Description dyn_qel_cc 0, 1 1 Turn on/off charge current quasielastic process dyn_qel_nc 0, 1 1 Turn on/off neutral current quasielastic process dyn_res_cc 0, 1 1 Turn on/off charge current resonance pion production dyn_res_nc 0, 1 1 Turn on/off neutral current resonance pion production dyn_dis_cc 0, 1 1 Turn on/off charge current deep inelastic scattering dyn_dis_nc 0, 1 1 Turn on/off neutral current deep inelastic scattering dyn_coh_cc 0, 1 1 Turn on/off charge current coherent pion production dyn_coh_nc 0, 1 1 Turn on/off neutral current coherent pion production dyn_mec_cc 0, 1 1 Turn on/off charge current meson exchange current process dyn_mec_nc 0, 1 1 Turn on/off neutral current meson exchange current process"},{"location":"getting-started/parameters/#quasi-elastic","title":"Quasi-elastic","text":"Parameter name Possible arguments Default value Description qel_vector_ff_set 1-6 2 Electromagnetic form factors parametrization:1 - dipole form2 - BBBA05 (Ref. [1])3 - BBA03 (Ref. [2])4 - JLab (Ref. [3])5 - NN10 with two photon exchange effect (Ref. [4]) qel_axial_ff_set 1-4 1 Axial form factors parametrization:1 - dipole form2 - 2-fold parabolic modification3 - 3-fold parabolic modification4 - 4-fold parabolic modification qel_strange 0, 1 0 Turn on/off the strange quark contribution to the NC axial form factors qel_strangeEM 0, 1 0 Turn on/off the strange quark contribution to the NC vector form factors delta_s any number -0.15 Strangeness contribution qel_cc_axial_mass positive number 1200 The axial mass value for charge current form factors qel_nc_axial_mass positive number 1350 The axial mass value for neutral current form factors qel_s_axial_mass positive number 1200 The axial mass value used in the dipole strange form factor qel_rpa 0-3 0 RPA settings:0 - do not use RPA1 - use RPA without effective mass of nucleon2 - use effective mass of nucleon without RPA (test only) 3 - use RPA with effective mass of nucleon (test only) flux_correction 0, 1 1 Turn on/off flux correction sf_method 0-3 0 Spectral function settings (for CCQE):0 - do not use spectral function1 - use grid spectral function (for 12C, 16O, 40Ar, 40Ca, 56Fe)2 - use factorized spectral function (for 16O, 40Ar, 40Ca) cc_smoothing 0, 1 1 If 1, the impossible quasi-elastic reaction (like CC nu scattering off proton) are skipped"},{"location":"getting-started/parameters/#pion-production","title":"Pion production","text":"Parameter name Possible arguments Default value Description delta_FF_set 1-7 1 Delta production form factors:1 - dipole form [5]2 - Paschos and Lalakulich, 2.12 MA = 1.05GeV BNL fit (Ref. [6])3 - Paschos and Lalakulich, 2.12 MA = 0.84GeV ANL fit (Ref. [6])4 - Paschos and Lalakulich, page 4, bottom right (Ref. [6])5 - Paschos and Lalakulich, page 5, top left (Ref. [6])6 - Eq. 13 from Ref. [7]7 - based on chiral quark model from Ref. [8] pion_axial_mass(for delta_FF_set 1) positive number 0.94 The axial mass value used in dipole parametrization of the resonance pion production form factor pion_C5A(for delta_FF_set 1) positive number 1.19 The C5A value used in dipole parametrization of the resonance pion production form factor spp_precision positive number 500 Controls the precision in RESDIS boundary region; should not be changed red_dis_cut positive number 1600 Boundary of RES-DIS transition; should not be changed coh_mass_correction 0, 1 1 Turn on/off Rein Sehgal correction to charge current coherent pion production coh_new 0, 1 1 Change between old (0) and improved (1) implementation of coherent pion production"},{"location":"getting-started/parameters/#two-body-current","title":"Two-body current","text":"Parameter name Possible arguments Default value Description mec_kind 1-4 1 Two-body current models:1 - Transverse Enhancement model (Ref. [9])2 - based on Marteau model (Ref. [10, 12])3 - Nieves et al. model (Ref. [11]) mec_ratio_pp [0,1] 0.6 The fraction of mixed initial nucleon pairs for charge current interaction. For neutral current the fraction is calculated as 1/(2*mec ratio pp + 1)"},{"location":"getting-started/parameters/#final-state-interactions","title":"Final state interactions","text":"Parameter name Possible arguments Default value Description kaskada_on 0, 1 1 Turn on (1) / off (0) final state interactions kaskada_w positive number 7 The value of the effective potential subtracted from the nucleons energy leaving the nucleus kaskada_redo 0, 1 0 If on, given output file (eventsout.root by default) is loaded, the primary vertex is copied and only final state interactions are simulated. New output file with .fsi.root suffix is created kaskada_writeall 0, 1 0 If on, all particles created during final state interactions are saved in all vector step positive number 0.2 Length of max step in the cascade in fm xsec 0, 1 1 Cross section models for pion-nucleon interactions: 0 - based on Ref. [13]1 - based on Ref. [14] pauli_blocking 0, 1 1 Turn on/off Pauli blocking formation_length(for formation_zone const) positive number 1 Formation length in fm tau positive number 8 The parameter control the formation length for ranft and rl models first_step 0, 1 0 If off, the formation zone is applied only for the particles created during final state interactions formation_zone explained below fz explained below"},{"location":"getting-started/parameters/#formation-zone-models","title":"Formation zone models","text":"<ul> <li><code>nofz</code>: formation zone is off</li> <li><code>skat8</code>: SKAT parametrization (Ref. [15])</li> <li><code>cosyn</code>: parametrization based on Color Transparency measurements (Ref. [16])</li> <li><code>cohl</code>: coherence length (Ref. [17])</li> <li><code>ranft</code>: parametrization based on hadron-hadron and hadron-nucleus collision (Ref. [18])</li> <li><code>rl</code>: as ranft but with fixed transverse momentum equal zero</li> <li><code>delta</code>: for resonance pion production; based on \u2206 lifetime (Ref. [19])</li> <li><code>const</code>: constant value (defined by formation_length)</li> <li><code>fz</code> (default):<ul> <li><code>cohl</code> for quasi-elastic scattering</li> <li><code>delta</code> for resonance pion production</li> <li><code>ranft</code> for deep inelastic scattering</li> <li><code>nofz</code> for meson exchange current</li> </ul> </li> <li><code>trans</code>: only for nuclear transparency analysis</li> </ul>"},{"location":"getting-started/parameters/#references","title":"References","text":"<p>[1] R. Bradford et al. \u201cA New parameterization of the nucleon elastic form-factors\u201d. Nucl.Phys.Proc.Suppl. 159 (2006), pp. 127\u2013132.</p> <p>[2] Howard Scott Budd, A. Bodek, and J. Arrington. \u201cModeling quasielastic form-factors for electron and neutrino scattering\u201d . arXiv: hep-ex/0308005 (2003).</p> <p>[3] E.J. Brash et al. \u201cNew empirical fits to the proton electromagnetic form-factors\u201d. Phys.Rev. C65 (2002), p. 051001.</p> <p>[4] Krzysztof M. Graczyk, Piotr Plonski, and Robert Sulej. \u201cNeural Network Parameterizations of Electromagnetic Nucleon Form Factors\u201d. JHEP. 1009 (2010), p. 053.</p> <p>[5] K.M. Graczyk, D. Kielczewska, P. Przewlocki, and J.T. Sobczyk. \"C(5)**A axial form factor from bubble chamber experiments\". Phys.Rev. D80 (2009) 093001</p> <p>[6] Olga Lalakulich and Emmanuel A. Paschos. \u201cResonance production by neutrinos. I. J = 3/2 resonances\u201d. Phys.Rev. D71 (2005), p. 074003.</p> <p>[7] L. Alvarez-Ruso, S. K. Singh, and M. J. Vicente Vacas. \u201cCharged current weak electroproduction of the \u2206 resonance\u201d. Phys. Rev. C. 57 (5 1998), pp. 2693\u20132699.</p> <p>[8] D. Barquilla-Cano, A.J. Buchmann, and E. Hernandez. \u201cAxial N-\u00bfDelta(1232) and N-\u00bfN*(1440) transition form factors\u201d. Phys.Rev. C75 (2007), p. 065203.</p> <p>[9] A. Bodek, H.S. Budd, and M.E. Christy. \u201cNeutrino Quasielastic Scattering on Nuclear Targets: Parametrizing Transverse Enhancement (Meson Exchange Currents)\u201d. Eur.Phys.J. C71 (2011), p. 1726.</p> <p>[10] Jan T. Sobczyk. \u201cModeling nuclear effects in neutrino interactions in 1-GeV region\u201d . arXiv: nucl-th/0307047 (2003).</p> <p>[11] J. Nieves, I. Ruiz Simo, and M. J. Vicente Vacas. \u201cInclusive charged-current neutrino-nucleus reactions\u201d. Phys. Rev. C. 83 (4 2011), p. 045501.</p> <p>[12] M. Martini et al. \u201cUnified approach for nucleon knock-out and coherent and incoherent pion production in neutrino interactions with nuclei\u201d. Phys. Rev. C. 80 (6 2009), p. 065501.</p> <p>[13] N. Metropolis et al. \u201cMonte Carlo Calculations on Intranuclear Cascades. I. Low-Energy Studies\u201d. Phys.Rev. 110 (1958), pp. 185\u2013203.</p> <p>[14] L.L. Salcedo et al. \u201cComputer simulation of inclusive pion nuclear reactions\u201d. Nucl.Phys. A484 (1988), p. 557.</p> <p>[15] D.S. Baranov et al. \u201cAn estimate for the formation length of hadrons in neutrino interactions\u201d (1984).</p> <p>[16] Wim Cosyn. \u201cExploring the limits of a hadronic picture of nuclei through pion and nucleon removal reactions\u201d. PhD thesis. Ghent University, 2009. url: http://lib.ugent.be/fulltxt/RUG01/001/350/817/RUG01-001350817/_2010/_0001/_AC.pdf1</p> <p>[17] A. Rubbia G. Battistoni A. Ferrari and P.R. Sala. The FLUKA nuclear cascade model applied to neutrino interactions. talk given at NuInt02. 2002.</p> <p>[18] J. Ranft. \u201cHadron production in hadron-nucleus and nucleus-nucleus collisions in a dual parton model modified by a formation zone intranuclear cascade\u201d. Zeitschrift f\u00a8ur Physik C Particles and Fields. 43.3 (1989), pp. 439\u2013446.</p> <p>[19] Tomasz Golan, Cezary Juszczak, and Jan T. Sobczyk. \u201cFinal State Interactions Effects in Neutrino-Nucleus Interactions\u201d. Phys.Rev. C86 (2012), p. 015505.</p>"},{"location":"getting-started/running/","title":"Running NuWro","text":""},{"location":"getting-started/running/#basics","title":"Basics","text":"<p>After a successful installation you will find <code>nuwro</code> executable in <code>nuwro/bin</code> folder. </p> <p>Hint</p> <p>You can run NuWro providing the path to <code>nuwro</code> or you can add <code>nuwro/bin</code> to <code>$PATH</code> by adding the following line to your <code>~/.bashrc</code>:</p> <pre><code>export PATH=(path to nuwro)/bin:$PATH\n</code></pre> <p>NuWro does not require any command line arguments, although there are several optional arguments:</p> <ul> <li><code>-o</code> to provide the path for output files</li> <li><code>-i</code> to provide the path to an input file with simulation settings</li> <li><code>-p</code> to change a single simulation parameter w.r.t to the input file (this one can be use multiple times)</li> </ul> <p>In general, the command to run NuWro would look like this:</p> <pre><code>nuwro [-o output root file] \\\n      [-i input parameters file] \\\n      [-p \"parameter name 1 = value 1\"] \\\n      [-p \"parameter name 2 = value 2\"] \\\n      ...\n      [-p \"parameter name N = value N\"]\n</code></pre> <p>When running RES and DIS channel you will see many PYTHIA warnings about catching an infinite loop - just ignore them. </p>"},{"location":"getting-started/running/#input","title":"Input","text":"<p>The path to a simulation settings file can be provided with <code>-i</code> option.</p> <p>Note</p> <p>If the path to a simulation settings file is not provided:</p> <ul> <li><code>$PWD/params.txt</code> will be used or</li> <li><code>nuwro/data/params.txt</code> will be used or</li> <li>hard-coded default settings will be used.</li> </ul> <p>The example settings file can be found in <code>nuwro/data/params.txt</code>.  It is recommended to copy this file to the working directory and modify as needed.</p> <p>The list of available settings can be found in parameters section.</p> <p>Example</p> <p>Copy default settings files to your working directory:</p> <pre><code>cp /path/to/nuwro/data/params.txt .\n</code></pre> <p>modify as needed and run NuWro:</p> <pre><code>nuwro\n</code></pre> <p>Note: If <code>nuwro/bin</code> is not in <code>$PATH</code> you need to provide the full path.</p> <p>Example</p> <p>Copy default settings files:</p> <pre><code>cp /path/to/nuwro/data/params.txt /some/path/my_params.txt\n</code></pre> <p>modify as needed and run NuWro providing the path to <code>my_params.txt</code>:</p> <pre><code>nuwro -i /some/path/my_params.txt\n</code></pre> <p>Parameters from a settings file can be modified using <code>-p</code> option. It is useful if you need to perform several simulations with only small changes to settings.</p> <p>Example</p> <p>Let <code>/some/path/my_params.txt</code> be you base configuration. The following bash script:</p> <pre><code>#!/bin/sh\nfor Ma in $(seq 1000 100 1300)\ndo\n    nuwro -i /some/path/my_params.txt \\\n          -o my_output_$Ma.root \\\n          -p \"qel_cc_axial_mass = $Ma\"\ndone\n</code></pre> <p>will perform 4 simulations with the same settings but axial mass.</p>"},{"location":"getting-started/running/#output","title":"Output","text":"<p>NuWro produces three output files:</p> <ul> <li><code>$PWD/eventsout.root</code> with an events tree</li> <li><code>$PWD/eventsout.root.txt</code> with flux-integrated cross sections</li> <li><code>$PWD/eventsout.root.par</code> with parameters used for the simulation</li> </ul> <p>The output path can be changed with <code>-o</code> option.</p> <p>Example</p> <p>The following command:</p> <pre><code>nuwro -o /path/to/simulation.root\n</code></pre> <p>will produce the following output files:</p> <ul> <li><code>/path/to/simulation.root</code></li> <li><code>/path/to/simulation.root.txt</code></li> <li><code>/path/to/simulation.root.par</code></li> </ul> <p>The instruction on how to work with NuWro output files can be found here.</p>"},{"location":"getting-started/running/#examples","title":"Examples","text":"<p>The list of all available settings (as well as instruction on how to define beam and target) can be found in parameters section.</p> <p>This section is just to demonstrate basic usage.</p>"},{"location":"getting-started/running/#ccqe-on-carbon","title":"CCQE on Carbon","text":"<p>We want to perform the following simulation:</p> <ul> <li>muon neutrino</li> <li>mono-energetic beam 1 GeV</li> <li>target = Carbon</li> <li>only CCQE dynamics</li> </ul> <p>Lets start with grabbing the default settings file, which we are going to modify for our needs:</p> <pre><code>cp /path/to/nuwro/data/params.txt ccqe_carbon.txt\n</code></pre>"},{"location":"getting-started/running/#1-setting-the-beam","title":"1. Setting the beam","text":"<p>Locate \"Beam specification\" section and make sure that all beam related settings are commented (including includes <code>@beam/...</code>).</p> <p>Add the following lines to define the beam:</p> <pre><code>beam_type = 0\nbeam_particle = 14\nbeam_energy = 1000\n</code></pre>"},{"location":"getting-started/running/#2-setting-the-target","title":"2. Setting the target","text":"<p>Locate \"Target specification\" section and make sure that all target related settings are commented (including includes <code>@target/...</code>).</p> <p>Add the following lines to define the target:</p> <pre><code>target_type = 0\nnucleus_p = 6\nnucleus_n = 6\n</code></pre> <p>Predefined targets</p> <p>Instead of defining target by hand it is possible to use predefined targets from <code>nuwro/data/target/</code> folder. In this case simply add:</p> <pre><code>@target/C.txt\n</code></pre>"},{"location":"getting-started/running/#3-setting-dynamics","title":"3. Setting dynamics","text":"<p>Locate the following lines:</p> <pre><code>dyn_qel_cc = 1  // Quasi elastic charged current\ndyn_qel_nc = 0  // Quasi elastic neutral current\ndyn_res_cc = 0  // Resonant charged current \ndyn_res_nc = 0  // Resonant neutral current\ndyn_dis_cc = 0  // Deep inelastic charged current \ndyn_dis_nc = 0  // Deep inelastic neutral current \ndyn_coh_cc = 0  // Coherent charged current\ndyn_coh_nc = 0  // Coherent neutral current\ndyn_mec_cc = 0  // Meson exchange charged current\ndyn_mec_nc = 0  // Meson exchange neutral current\n</code></pre> <p>and modify according to your needs. In this case disable all dynamics but CCQE.</p>"},{"location":"getting-started/running/#4-running-simulation","title":"4. Running simulation","text":"<p>If the <code>ccqe_carbon.txt</code> settings file is ready simply run:</p> <pre><code>nuwro -i ccqe_carbon.txt -o ccqe_carbon.root\n</code></pre>"},{"location":"getting-started/running/#comparing-nucleus-models","title":"Comparing nucleus models","text":"<p>We want to compare three nucleus models implemented in NuWro:</p> <ul> <li>(global) Fermi gas (with fixed Fermi level)</li> <li>local Fermi gas (with Fermi level dependent on density)</li> <li>spectral function</li> </ul> <p>Lets consider the NuMi neutrino beam and CH target for all CC channels. We need to perform three simulation, but they all may share the base settings file:</p> <pre><code>cp /path/to/nuwro/data/params.txt numi_cc_ch.txt\n</code></pre>"},{"location":"getting-started/running/#1-setting-beam-and-target","title":"1. Setting beam and target","text":"<p>Make sure that all other beam and target settings (\"Beam specification\" and \"Target specification\") are commented. Then add the following lines to <code>numi_cc_ch.txt</code>:</p> <pre><code>@beam/NuMi_nu_100_10000.txt  # predefined beam from nuwro/data/beam/\n\ntarget_type = 1              # composed target\ntarget_content = 6 6 1x      # 1 x Carbon\ntarget_content += 1 0 1x     # 1 x Hydrogen\n</code></pre>"},{"location":"getting-started/running/#2-setting-dynamics","title":"2. Setting dynamics","text":"<p>Locate the following lines:</p> <pre><code>dyn_qel_cc = 1  // Quasi elastic charged current\ndyn_qel_nc = 0  // Quasi elastic neutral current\ndyn_res_cc = 1  // Resonant charged current \ndyn_res_nc = 0  // Resonant neutral current\ndyn_dis_cc = 1  // Deep inelastic charged current \ndyn_dis_nc = 0  // Deep inelastic neutral current \ndyn_coh_cc = 1  // Coherent charged current\ndyn_coh_nc = 0  // Coherent neutral current\ndyn_mec_cc = 1  // Meson exchange charged current\ndyn_mec_nc = 0  // Meson exchange neutral current\n</code></pre> <p>and modify according to your needs. In this case turn on only CC interactions.</p>"},{"location":"getting-started/running/#3-running-simulations","title":"3. Running simulations","text":"<p>As we are going to change only nucleus model we may use the same base settings file for all three simulations.</p> <p>For (global) Fermi gas you have to set <code>nucleus_target = 1</code> and you may want to make sure that spectral function is disabled (<code>sf_method</code>):</p> <pre><code>nuwro -i numi_cc_ch.txt \\\n      -p \"nucleus_target = 1\" \\\n      -p \"sf_method = 0\" \\\n      -o numi_cc_ch_gfg.root\n</code></pre> <p>In the similar way you can perform the simulation for local Fermi gas:</p> <pre><code>nuwro -i numi_cc_ch.txt \\\n      -p \"nucleus_target = 2\" \\\n      -p \"sf_method = 0\" \\\n      -o numi_cc_ch_lfg.root\n</code></pre> <p>and for spectral function:</p> <pre><code>nuwro -i numi_cc_ch.txt \\\n      -p \"nucleus_target = 2\" \\\n      -p \"sf_method = 1\" \\\n      -o numi_cc_ch_sf.root\n</code></pre> <p>Spectral function is applied only for (quasi-)elastic dynamics. For others the model set by <code>nucleus_target</code> is used.</p>"}]}